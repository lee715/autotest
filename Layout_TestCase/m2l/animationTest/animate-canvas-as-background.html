<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>Animation Test</title>
		<!-- <meta name="viewport" content="width=device-width initial-scale=1.0" /> -->

		<!-- [1] -->
	    <style>
	    body {
	    	margin:0;
	    }
		#container {
		    width: 100px;
		    height: 100px;
		    background-image: -webkit-canvas(sourceCanvas);
		    background-size: 100%;
		    display: inline-block;
		}
		</style>

	</head>

	<body>
		<div>
	        <div style="display: inline-block">
	            <div id="container"></div>
	        </div>
	        <div id="canvas-container" style="display: inline-block"></div>
    	</div>


		<script>/* [1] */
	        var ctx = document.getCSSCanvasContext('2d', 'sourceCanvas', 100, 100);
	        var canvas = ctx.canvas;

	        function asyncDraw2() {
	            ctx.fillStyle = "green";
	            ctx.fillRect(0, 0, 300, 300);
	        }

	        function asyncDraw1() {
	            ctx.fillStyle = "red";
	            ctx.fillRect(0, 0, 300, 300);
	            window.webkitRequestAnimationFrame(asyncDraw2);
	        }

	        window.webkitRequestAnimationFrame(asyncDraw1);

	        document.querySelector('#canvas-container').appendChild(canvas);
    	</script>

	</body>
</html>
